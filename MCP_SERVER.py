import heapq
import json
import random
from fastmcp import FastMCP
from typing import Dict, Optional, List, Tuple

mcp = FastMCP("ScenicArea_Guide")

# --- 1. 定义节点（名字、坐标 x,y、介绍）---
# 画布参考范围: x[0-1000], y[0-800]
PLACE = {
    # === A区：入口与服务区 (主要位于画布下方) ===
    "S01": {"name": "景区南大门", "desc": "【设施概述】 景区南大门坐落于山脚下的开阔地带，紧邻游客中心与碧波湖区域，是绝大多数游客进入景区的首选入口，也是景区的“门面担当”。它不仅仅是一个检票通道，更是一座融合了当地传统建筑风格与现代设计理念的宏伟地标。【特色与服务】 南大门采用巨型石木结构，飞檐斗拱，气势磅礴，匾额上烫金的大字在阳光下熠熠生辉。大门广场宽敞整洁，常年摆放着巨型花坛与景观小品，是拍摄“到此一游”集体照的最佳背景。 在功能上，南大门设有多个智能验票闸机，支持人脸识别与身份证快速入园，极大缩短了排队时间。大门两侧设有安检区与特殊通道（无障碍通道、军人/老人优先通道），体现了景区的人文关怀。夜幕降临时，大门的轮廓灯光亮起，金碧辉煌，宛如一座天宫的入口，迎接每一位远道而来的宾客。", "x": 500, "y": 780},
    "S02": {"name": "游客中心", "desc": "【设施概述】 游客中心紧邻景区南大门，是一座现代化的综合服务大楼，也是整个景区的指挥调度中心。其外观造型模仿了周围起伏的山峦，流线型的屋顶与背景环境完美融合。这里是游客获取信息、寻求帮助、休憩调整的第一站。【特色与服务】 走进大厅，巨大的电子显示屏实时滚动播放着景区的天气、客流分布以及各个景点的实时画面。服务台的工作人员提供多语言咨询服务，并备有各类纸质导览图和电子语音导览器租赁。 游客中心的功能极其强大：医疗救助站：配备专业医护人员和急救设备，处理突发身体不适。母婴室与第三卫生间：设施温馨齐全，解决了家庭出游的后顾之忧。行李寄存处：提供智能储物柜和人工大件行李寄存。影视以此厅：循环播放景区的宣传纪录片，让您未进山先知山美。失物招领与投诉中心：全天候保障游客权益。 这里就像一位贴心的全能管家，时刻准备着为您解决旅途中的一切难题。", "x": 580, "y": 750},
    "S03": {"name": "生态停车场", "desc": "【设施概述】 位于景区南大门外侧的生态停车场，彻底颠覆了人们对停车场“水泥森林、尾气弥漫”的刻板印象。这是一个占地面积巨大的园林式停车空间，能够同时容纳数千辆私家车与大巴车停放。【特色与服务】 之所以称为“生态”，是因为停车场采用了高渗透性的植草砖铺设，车位之间种植了高大的乔木，形成了天然的遮阳伞。炎炎夏日，爱车停在这里也能避免暴晒。停车场内配备了完善的智能化系统，入口处有剩余车位显示屏，场内有清晰的导视系统和寻车查询机。 为了响应绿色出行，停车场专门开辟了新能源汽车充电专区，配备了数十个快充与慢充桩。此外，停车场边缘还设有自助洗车点和司机休息室（提供热水、简餐），为长途驾驶的游客提供了极大的便利。", "x": 420, "y": 750},
    "S04": {"name": "景区北门", "desc": "【设施概述】 与南大门的喧嚣热闹不同，位于景区高海拔区域背侧的景区北门，则更像是一条“私密通道”。它距离“情人谷”和“摘星峰”区域较近，通常作为自驾游深度玩家或从后山徒步穿越者的入口。【特色与服务】 北门的设计小巧而精致，掩映在苍翠的竹林之中，环境清幽。这里虽然规模不大，但功能俱全，设有独立的售票窗口和卫生间。从北门入园，可以避开主游览路线的人流高峰，直接切入高山景观区，是喜欢安静、想要快速登顶的游客的“秘密捷径”。对于不想走回头路的游客，选择“南进北出”或“北进南出”也是非常经典的穿越路线。", "x": 100, "y": 150}, # 北门在左上角远端
    "S05": {"name": "观光车总站", "desc": "【设施概述】 观光车总站位于景区南门内广场侧方，是连接大门、索道下站以及碧波湖周边景点的地面交通枢纽。这里停放着整齐划一的电瓶观光车队，它们色彩鲜艳，造型可爱，是景区内一道流动的风景线。【特色与服务】 所有观光车均为零排放的环保电动车，行驶平稳且静音。总站设有候车长廊，遮风挡雨，排队秩序井然。 司机均经过严格培训，他们不仅是驾驶员，更是兼职导游，行车途中会幽默风趣地讲解沿途的风景典故。对于带着老人、小孩或腿脚不便的游客来说，观光车是省时省力的最佳选择。它能将原本需要步行30分钟的路程缩短至5分钟，让您保留更多的体力去挑战山顶的美景。", "x": 500, "y": 700},

    # === B区：湖滨休闲区 (画布右下侧) ===
    "S06": {"name": "碧波湖", "desc": "【景点概述】 如果说摘星峰是景区的阳刚之气，那么位于南部区域的碧波湖则是景区的温柔之源。这是一片宽阔的高山湖泊，水域面积广阔，水质清澈见底，终年不冻。湖水汇集了山间的溪流与飞瀑（如上游的飞龙瀑布），经过层层过滤，呈现出醉人的碧蓝色。碧波湖不仅调节着整个景区的微气候，更为游客提供了一个亲水、戏水、赏水的休闲空间。【景观特色】 碧波湖之美，在于其“灵动”与“多变”。风平浪静时，湖面如同一面巨大的镜子，倒映着蓝天白云和四周的青山绿树，山光水色融为一体，难辨真假。微风拂过时，湖面泛起层层涟漪，波光粼粼，如同无数钻石在阳光下闪耀。湖面上最引人注目的建筑莫过于“湖心亭”。这座古色古香的亭子通过九曲桥与岸边相连，孤悬于湖水中央，是赏湖的最佳点位。而在湖的另一侧，则是蜿蜒曲折的“荷花栈道”。每逢盛夏，万亩荷花竞相开放，粉嫩的荷花与碧绿的荷叶相映成趣，游客穿行于栈道之上，可谓“人在画中游”。此外，碧波湖畔生态环境极佳，常有水鸟在湖面嬉戏掠食，与垂钓园中静坐的垂钓者动静结合，构成了一幅和谐的生态画卷。【游览体验】 碧波湖的游览方式多种多样，适合全年龄段的游客。您可以选择在“垂钓园”租一根鱼竿，享受半日浮生半日闲的静谧时光；也可以带着孩子在湖边喂鱼、观察水生植物，进行一次生动的自然科普。对于喜欢浪漫的游客，碧波湖更是不可多得的圣地。您可以租上一艘小船，泛舟湖上，近距离感受湖水的清凉；或者在傍晚时分，漫步于湖边的游步道，看着夕阳的余晖将湖水染成金色。此时，远处的“幕电影广场”可能会开始播放露天电影，光影投射在夜幕下，与湖水的倒影相映生辉。碧波湖是整个景区行程中最轻松惬意的一站，它用温柔的波光抚平游客登山的疲惫，为这段旅程画上一个完美的句号。", "x": 750, "y": 650},
    "S07": {"name": "荷花栈道", "desc": "【景点概述】 荷花栈道位于景区南部碧波湖的一隅，连接着湖心亭与东岸的陆地，是一处集亲水、赏花、休闲于一体的景观工程。这里利用碧波湖浅水区淤泥肥沃的特点，种植了数千亩的观赏荷花与睡莲。为了让游客能零距离亲近这片水域，景区修建了这条蜿蜒曲折的亲水栈道。栈道贴近水面，蜿蜒穿行于碧绿的荷叶与娇艳的荷花之间，仿佛一条漂浮在水上的丝带。【景观特色】 “接天莲叶无穷碧，映日荷花别样红”是荷花栈道的真实写照。盛夏时节，巨大的荷叶如同一把把撑开的绿伞，层层叠叠，铺满了整个湖面。粉红、雪白、淡黄的荷花亭亭玉立于绿叶之上，有的含苞待放，娇羞欲语；有的盛情绽放，婀娜多姿。栈道的设计极具匠心，它不是笔直的线条，而是采用了“九曲十八弯”的布局。这种设计不仅增加了游览的趣味性，延长了观赏路线，更做到了“移步换景”。在栈道的某些节点，还设置了扩大的休息平台和凉亭，供游客驻足观赏。此外，栈道两侧安装了隐形的喷雾装置，定时喷出的水雾弥漫在荷塘之上，营造出一种烟雨江南的朦胧意境，让人仿佛置身于仙境之中。如果你低头细看，还能发现荷叶下嬉戏的野鸭和成群结队的游鱼，生机盎然。【游览体验】 行走在荷花栈道上，是一次全方位的感官疗愈。清晨是游览的最佳时机，此时晨露未干，荷香最浓，空气中弥漫着清冽的植物气息，深吸一口，神清气爽。你可以伸手轻轻触碰路边伸出的荷叶，感受那一抹清凉（但请勿采摘）。这里是汉服爱好者的天堂，许多年轻游客身着古装，撑一把油纸伞，在栈道上翩翩起舞，与古典的荷塘景色完美融合，随手一拍便是古风大片。傍晚时分，夕阳的余晖洒在湖面上，金色的光影与绿叶红花交织，又是另一番辉煌景象。家长们喜欢带着孩子来这里，指认不同颜色的荷花，背诵关于荷花的古诗词，寓教于乐。荷花栈道，用它的清雅与高洁，为喧嚣的尘世提供了一方净土。", "x": 820, "y": 680},
    "S08": {"name": "湖心亭", "desc": "【景点概述】 湖心亭，顾名思义，是屹立于南部碧波湖中心的一颗璀璨明珠。它通过蜿蜒曲折的九曲桥（即地图上的连接线，连接碧波湖岸边与荷花栈道）与陆地相连，孤悬于茫茫水面之上。这座亭子是典型的中国古典园林建筑，飞檐翘角，雕梁画栋，红柱绿瓦，尽显东方美学的神韵。它不仅是湖面的点睛之笔，更是游客深入湖心、360度环视山水美景的最佳落脚点。【景观特色】 湖心亭的建筑构造极为精巧，通常为六角或八角形，寓意“六合通达”或“八方来财”。亭子的顶部装饰着精美的藻井，梁枋上绘制着“苏式彩画”，内容多为花鸟鱼虫或民间故事。亭子四周设有“美人靠”（带靠背的长椅），供游客倚栏而坐。从这里向四周望去，景色各不相同：北面是巍峨的群山和倒映水中的云雾古寺，南面是开阔的游客中心广场，东面是接天莲叶的荷花栈道，西面则是幽静的垂钓园。最妙的是，由于处于湖心，这里的水面格外平静，亭子的倒影与实物在水中完美对称，形成“水下有亭，亭下有水”的奇观。每当皓月当空，这里便是赏月的绝佳之地，“印月”之景不输杭州西湖。【游览体验】 湖心亭最适合“慢游”。走过九曲桥，每走一步换一个角度，仿佛在欣赏一幅徐徐展开的长卷。来到亭中，找个位置坐下，你可以从随身带的鱼食包里抓一把鱼食抛向水中，瞬间，成百上千条红色的锦鲤会从四面八方聚集而来，在水中翻腾争抢，染红了半个湖面，名为“万鲤朝宗”，场面喜庆又壮观。这里微风习习，即使在盛夏也凉爽宜人。许多游客喜欢在这里静坐发呆，看来往的游船划破水面，看蜻蜓点水，看云卷云舒。对于喜欢汉服古风摄影的游客，湖心亭是必拍场景，倚栏听风、凭栏远眺的姿态，配上古色古香的背景，瞬间穿越回千百年前。这里没有爬山的劳累，只有岁月静好的安宁。", "x": 760, "y": 615},
    "S09": {"name": "垂钓园", "desc": "【景点概述】 垂钓园位于碧波湖的东侧岸边，是一片专门为钓鱼爱好者和寻求静谧时光的游客开辟的休闲区域。这里远离了主游览干道的喧闹，岸边垂柳依依，芳草萋萋，环境清幽雅致。垂钓园利用碧波湖天然的水域优势，并在水下设置了鱼礁，聚集了草鱼、鲤鱼、鲫鱼等多种野生及放养鱼类。它不仅是一个娱乐项目，更体现了景区“动静结合、张弛有度”的旅游规划理念。【景观特色】 垂钓园的景观设计充满了田园牧歌式的风情。岸边每隔一段距离便设有一个木质的钓台，钓台上方配有茅草顶的遮阳伞，既遮阳挡雨又增添了野趣。园区周围种植了大量的芦苇和菖蒲，微风吹过，芦花飞舞，沙沙作响。这里的水质极佳，清澈见底，可以看到鱼儿在水草间穿梭。为了保护生态平衡，垂钓园实行“限钓”和“放流”政策，鼓励游客体验垂钓的乐趣而非单纯的捕获。在垂钓园的一角，还设有一座“渔文化博物馆”小屋，展示了各种传统的渔具和图文资料，介绍了当地独特的渔猎文化。【游览体验】 走进垂钓园，时间的流速仿佛变慢了。这里没有导游的催促，没有拥挤的人潮。您可以租上一套渔具，在此安坐半日。看着浮漂在水面上微微颤动，那一刻的专注能让人忘却所有的烦恼。这是一项非常适合亲子互动的活动，父亲手把手教孩子上饵、抛竿、遛鱼，当鱼儿上钩的那一刻，孩子兴奋的欢呼声是这里最动听的音乐。对于不钓鱼的家属，可以在旁边的茶座泡一壶茶，读一本书，或者在柳树下的吊床上小憩。傍晚时分是垂钓园最美的时候，夕阳将湖面染成金色，远处的渔船归港，岸边的剪影如诗如画，让人深刻体会到“落霞与孤鹜齐飞，秋水共长天一色”的意境。垂钓园，贩卖的不是鱼，而是久违的耐心与平静。", "x": 900, "y": 600},
    "S10": {"name": "水幕电影广场", "desc": "【景点概述】 幕电影广场（露天电影广场）位于景区南部的核心服务区，紧邻碧波湖畔与纪念品商店，是景区夜间经济与文化生活的重要载体。它不同于传统的室内影院，而是一个开放式的、融合了自然景观与现代科技的休闲广场。这里白天是游客集散、休息的宽阔草坪，每当夜幕降临，便摇身一变，成为光影交错的梦幻剧场，为留宿景区的游客提供了一个不可多得的社交与娱乐空间。【景观特色】 广场的核心是一块巨大的高清户外LED屏幕，或者是利用特殊的投影技术，以山体或水幕为背景进行投射，视觉效果极具震撼力。广场并非摆放着冰冷的座椅，而是采用了阶梯式的草坪设计，或者是散落着舒适的懒人沙发、帐篷和露营椅。这里的氛围主打“松弛感”。头顶是璀璨的星空，身旁是静谧的碧波湖，耳边偶尔传来湖水的拍岸声和草丛里的虫鸣。在这样的环境下看电影，电影本身的内容似乎已经不那么重要，重要的是那种回归自然、回归童真的体验。广场周边还配套了灯光装饰，星星点点的彩灯挂在树梢，营造出温馨浪漫的氛围。此外，广场边缘设有移动餐车和水吧，提供爆米花、烧烤、啤酒和热饮，烟火气十足。【游览体验】 幕电影广场是结束一天疲惫行程的最佳“充电站”。当你在山上攀爬了一整天，双腿酸痛时，来到这里，陷进柔软的沙发里，点上一杯冰镇饮料，看着屏幕上播放的经典老片或当下的热门大片，身心的疲惫会瞬间消散。这里是社交的绝佳场所。来自天南地北的游客聚集在一起，或许因为电影的一个笑点而共同欢笑，或许因为一段感人的情节而产生共鸣。对于亲子家庭来说，这里是孩子们最快乐的时光，他们可以在草坪上自由奔跑，观看动画电影；对于情侣来说，依偎在星空下看一场爱情电影，浪漫指数爆表。有时，广场还会举办篝火晚会或小型音乐节，大家围着篝火载歌载舞，将景区的夜晚推向高潮。幕电影广场，让景区的夜晚不再单调，变得鲜活而热烈。", "x": 680, "y": 700},

    # === C区：山林探险区 (画布左侧及中下部) ===
    "S11": {"name": "百鸟林", "desc": "【景点概述】 百鸟林位于景区西部，是一片保存完好的原始次生阔叶林区，连接着飞龙瀑布与一线天。这里植被茂密，古木参天，溪流纵横，生态环境极其优越，是各种山地鸟类栖息繁衍的天堂。景区在保护生态的前提下，依山就势搭建了巨大的生态鸟网（高空天网，不影响鸟类飞翔但防止其飞离核心区）和空中观鸟栈道，将这里打造成了一个开放式的百鸟乐园。据统计，林中生活着画眉、相思鸟、红腹锦鸡、白鹇等上百种、数千只珍稀鸟类，“百鸟林”之名名副其实。【景观特色】 走进百鸟林，首先迎接你的是一场听觉盛宴。不同于城市的喧嚣，这里充斥着各种鸟儿清脆悦耳的鸣叫声：有的婉转如歌，有的短促有力，有的低沉厚重，此起彼伏，交织成一首大自然的交响曲。在景观设计上，百鸟林力求“自然”。栈道穿梭于树冠层之间，让游客可以平视甚至俯视鸟类的活动。林中设置了多个投食点和鸟巢，吸引鸟儿驻足。最引人注目的是林中的“孔雀谷”，数百只蓝孔雀和白孔雀在此自由漫步。每当特定的音乐响起或游客身着鲜艳服装经过时，孔雀便会竞相开屏，翠绿与洁白的羽扇在阳光下闪耀，美不胜收。此外，林中还有专门的鹦鹉互动区，色彩斑斓的鹦鹉不仅会飞到游客的手臂上乞食，有些还能模仿人类说话，令人忍俊不禁。【游览体验】 百鸟林是亲子游和科普游的最佳课堂。孩子们在这里可以近距离观察鸟类的羽毛颜色、喙的形状以及飞行姿态，配合沿途设置的科普解说牌，能学到许多书本上学不到的知识。建议游客带上一包景区提供的专用鸟食。当你伸出手掌，胆大的鸟儿会轻盈地落在你的指尖或肩头啄食，那种毛茸茸的触感和被小生灵信任的感觉，会让人的心瞬间融化。对于摄影爱好者来说，这里是“打鸟”的圣地，带上长焦镜头，可以捕捉到红腹锦鸡在林间跳跃的艳丽身影，或者是画眉鸟引吭高歌的精彩瞬间。漫步百鸟林，呼吸着高浓度的负氧离子，聆听着天籁之音，人与自然在这里实现了真正的和谐共生。", "x": 250, "y": 600},
    "S12": {"name": "一线天", "desc": "【景点概述】 一线天位于景区西部，连接着百鸟林与好汉坡，是典型的高山峡谷裂隙地貌。这里原本是一座完整的巨大山体，在亿万年前的地壳运动中，因受力不均而发生断裂，正如神话传说中被巨灵神用利斧劈开一般，形成了一道长约百米、高数十米、但宽度仅容一人通过的狭长峡谷。置身谷底，仰望苍穹，原本广阔的天空被高耸的崖壁挤压成了一条细细的蓝线，故而得名“一线天”。【景观特色】 一线天以“奇、窄、险、幽”著称。最窄处不足一米，体型稍胖的游客甚至需要侧身收腹才能勉强通过，这种强烈的压迫感和幽闭感是其独特的魅力所在。两侧崖壁如刀削斧劈般平整垂直，岩石表面裸露着古老的纹理，记录着岁月的沧桑。由于常年照不到阳光，峡谷内光线昏暗，怪石嶙峋，阴凉湿润，岩壁上偶尔滴下的水珠声在幽谷中回荡，更增添了几分神秘色彩。然而，一线天的奇妙之处在于光影的变化。正午时分，当太阳运行到峡谷正上方那一刻，一束强烈的阳光会像利剑一样垂直射入谷底，原本昏暗的峡谷瞬间被点亮，崖壁上的青苔和岩石纹理在光柱的照耀下纤毫毕现，这种“天光乍泄”的景象神圣而庄严，持续时间极短，能见到者皆为幸运之人。【游览体验】 穿越一线天是一次独特的探险历程。入口处往往排着队，大家怀着忐忑又兴奋的心情依次进入。走进峡谷，气温骤降，仿佛瞬间进入了天然空调房。你需要时刻注意脚下的台阶和头顶突出的岩石。在行进过程中，人与人之间的距离被迫拉近，前后的游客往往会互相提醒、互相鼓励，增添了旅途的温情。当你终于穿过幽暗狭长的峡谷，眼前豁然开朗的那一刻，会有种“山重水复疑无路，柳暗花明又一村”的重生感。回头望去，那道刚刚走过的裂缝仿佛大山的伤口，静静地伫立在那里。对于孩子来说，这里是最好的地理课堂，可以直观地了解地壳运动的力量；对于成年人来说，这里则是体验大自然压倒性威严、反思人类渺小的绝佳场所。", "x": 200, "y": 450},
    "S13": {"name": "飞龙瀑布", "desc": "【景点概述】 如果说碧波湖是静谧的淑女，那么位于西侧峡谷深处的飞龙瀑布则是豪迈的勇士。它是景区内落差最大、水流量最充沛的自然瀑布。水源源自高山深处的地下暗河与融雪，汇聚成流后，从近百米高的断崖顶端倾泻而下，气势磅礴。因其水流在空中受到岩石的阻挡与风力的吹拂，形态蜿蜒曲折，宛如一条白色的巨龙从天而降，一头扎入下方的深潭之中，故得名“飞龙瀑布”。【景观特色】 “未见其形，先闻其声”是飞龙瀑布的一大特点。在距离瀑布尚有一段距离的山路上，你就能听到如雷贯耳的轰鸣声，仿佛千军万马奔腾而来，震撼人心。走近观看，瀑布如银河倒挂，水珠飞溅。巨大的水流冲击着底部的岩石，激起数米高的水雾，使得瀑布周围常年细雨蒙蒙。在阳光明媚的午后，阳光折射在弥漫的水雾上，经常会在瀑布前方架起一道甚至双道绚丽的彩虹，横跨幽谷，美轮美奂，被称为“飞龙吐珠”。瀑布下方的水潭深不见底，潭水呈墨绿色，寒气逼人。潭边怪石嶙峋，常年受到水流的冲刷，表面光滑如镜。周围的崖壁上生长着各种喜阴的蕨类植物和翠绿的青苔，与白色的瀑布形成了鲜明的色彩对比，构成了一幅生动的水墨山水画。【游览体验】 观赏飞龙瀑布是一次全方位的感官享受。景区在最佳观赏点设置了观瀑台，你可以在那里感受“飞流直下三千尺”的壮阔。当微风吹过，细小的水雾扑面而来，带来丝丝凉意，瞬间驱散了登山的燥热与疲惫。这里也是天然的“氧吧”，空气中负氧离子含量极高，深吸一口气，清心润肺，让人神清气爽。对于喜欢探险的游客，还可以沿着瀑布旁边的栈道向下行走，近距离感受水流冲击的震动感。这里是摄影师们最爱的地方，无论是用慢门拍摄丝绸般的流水，还是抓拍彩虹的瞬间，都能出大片。如果你足够幸运，甚至能看到在此处栖息的山鸟穿过水帘，灵动至极。飞龙瀑布展示了大自然最狂野、最有力量的一面，让人不禁感叹造物主的鬼斧神工。", "x": 300, "y": 500},
    "S14": {"name": "好汉坡", "desc": "【景点概述】 好汉坡位于景区的中部，连接着下方的钟楼区域与上方的高山游览区，是徒步登山者的必经之路，也是景区内坡度最陡、台阶最密、挑战性最大的一段路程。这段石阶路全长约800米，垂直落差却达到了近300米，大部分台阶的倾斜角度超过了45度，甚至有些路段接近60度。俗话说“不到长城非好汉”，而在本景区，则是“不爬好汉坡，枉来走一遭”。这里是检验体力与意志力的天然赛场。【景观特色】 好汉坡的石阶全部由山体原石开凿铺设而成，古朴粗犷，经过岁月的磨砺，石阶表面已被无数登山者的脚步磨得光滑发亮。道路两旁古树参天，郁郁葱葱的树冠在头顶交织成绿色的穹顶，为登山者遮挡了烈日。沿途每隔一段距离，便设有供人休息的石凳和凉亭，如“歇脚亭”、“望松亭”等。每一段路程的护栏上都刻有励志的成语或诗句，如“坚持就是胜利”、“无限风光在险峰”，给人以精神上的鼓舞。在好汉坡的中段，有一块巨大的“好汉石”，上面刻着红色的“好汉”二字，所有凭借双脚爬上来的游客，都会自豪地在此留影，作为自己挑战成功的勋章。此外，随着海拔的升高，路边的植被也发生着变化，从阔叶林逐渐过渡到针叶林，沿途不仅能挥洒汗水，还能上一堂生动的植物垂直分布课。【游览体验】 攀登好汉坡是一次“痛并快乐着”的体验。开始时可能还觉得轻松，但随着高度的增加，呼吸开始急促，双腿开始发酸，汗水湿透衣背。这时，你会看到周围的游客都在互相加油打气，陌生的路人会递给你一张纸巾或一瓶水，这种患难与共的温情是索道上体会不到的。当你咬紧牙关，一步一个脚印终于登顶的那一刻，那种征服自我的成就感会瞬间爆发。回头俯瞰刚刚走过的蜿蜒山路，看着那些还在艰难攀爬的身影，你会发自内心地为自己感到骄傲。登顶后的山风吹干了汗水，那种通透舒爽的感觉，被游客称为“通过身体的苦修换来灵魂的愉悦”。", "x": 350, "y": 400},
    "S15": {"name": "索道下站A", "desc": "【设施概述】 这条连接山脚与山顶的索道，被誉为“空中的观景长廊”。索道下站：位于南部碧波湖畔，建筑风格古色古香，与周围的水景园林融为一体。游客在此排队检票，登上全透明的观景缆车。【特色与体验】 这不仅仅是交通工具，更是一个移动的景点。索道全长数千米，垂直落差巨大。 坐在缆车内，随着轿厢缓缓升起，您将体验到视角的急剧变化：从平视碧波荡漾的湖水，到俯视郁郁葱葱的树冠，再到平视巍峨的崖壁。在缆车中段，您可以清晰地看到脚下的“好汉坡”蜿蜒曲折，看到登山者如蚂蚁般挪动，从而庆幸自己选择了“上帝视角”。 在云雾天气，缆车穿云破雾，仿佛在仙境中穿行；夕阳西下时，更是能拍到“缆车在落日中穿行”的绝美剪影。上下两站均设有观景平台、洗手间和小卖部，方便游客整顿装备。", "x": 450, "y": 600},
    "S16": {"name": "情人谷", "desc": "【景点概述】 情人谷，坐落于景区西北部的幽深峡谷之中，是一处被群山温柔怀抱的世外桃源。相较于主游览干线的喧嚣，这里偏安一隅，独享一份静谧与安宁。相传古时曾有一对神仙眷侣厌倦了天庭的清冷，在此结庐而居，抚琴吹箫，留下了“只羡鸳鸯不羡仙”的佳话，故而得名“情人谷”。这里植被茂密，溪流潺潺，四季常青，是情侣们互诉衷肠、许下山盟海誓的最佳场所，也被游客誉为景区内的“爱情圣地”。【景观特色】 情人谷的景观设计处处透着“浪漫”二字。步入谷口，首先是一条由粉色与紫色花卉铺就的“爱情小径”，两侧的树枝上挂满了红色的丝带与风铃，微风吹过，清脆悦耳的风铃声仿佛是爱人的低语。谷中最著名的景观是一对生长千年的“连理树”，两棵参天大树根部相连，树干在半空中相互缠绕拥抱，枝叶交融，难分彼此，象征着永结同心、生死相依的爱情。沿着蜿蜒的溪流深入，你会发现许多设计精巧的私密空间。有隐蔽在花丛中的双人秋千，有横跨溪流的心形拱桥，还有刻满爱情诗句的石碑。溪水清澈见底，水中游弋着成双成对的锦鲤。在谷的深处，还有一面巨大的“同心锁墙”，密密麻麻地挂满了游客留下的铜锁，每一个锁都锁住了一个动人的爱情故事。每逢春季，满谷的桃花与樱花盛开，落英缤纷，将整个山谷染成粉红色，空气中都弥漫着甜蜜的味道。【游览体验】 游览情人谷，不仅是一次视觉的享受，更是一次情感的升温之旅。情侣们通常会手牵手漫步在林间小道上，远离外界的打扰，享受二人世界的甜蜜。你们可以在“连理树”下合影留念，买一把同心锁，刻上彼此的名字，锁在铁链上，然后将钥匙抛入深潭，寓意爱情永恒不变。除了情侣，这里也适合喜欢安静的独行者或闺蜜团。找一块溪边的平整巨石坐下，读一本好书，或者仅仅是发呆听泉水叮咚，都能让人感到无比的放松。如果你在傍晚时分来到这里，还可以看到萤火虫在草丛中飞舞，星星点点的光芒如同坠落凡间的繁星，营造出梦幻般的童话氛围。情人谷，是一个能让时间慢下来，让人重新相信爱情美好的地方。", "x": 150, "y": 300},

    # === D区：古刹文化区 (画布中部半山腰) ===
    "S17": {"name": "云雾古寺", "desc": "【景点概述】 云雾古寺，作为本风景区的灵魂所在，坐落于群山环抱的半山腹地。它不仅是景区地理位置上的核心枢纽，连接着祈福台、钟楼与藏经阁，更是这片灵山秀水间的精神图腾。寺庙始建于前朝，历经数百年的风雨沧桑与多次修缮，依然保持着古朴庄严的建筑风貌。因其地势独特，常年被山间缭绕的云雾所笼罩，晨钟暮鼓声中，若隐若现的红墙黄瓦仿佛天宫楼阁，故得名“云雾古寺”。【景观特色】 踏入古寺，首先映入眼帘的是巍峨的山门，门楣上悬挂的匾额笔力遒劲，尽显沧桑。寺内布局严谨，沿中轴线递进，大雄宝殿气势恢宏，飞檐翘角上雕刻的脊兽栩栩如生，似在诉说着千年的传说。大殿内供奉的金身佛像庄严肃穆，慈眉善目，低眉俯瞰着芸芸众生。云雾古寺最大的特色在于“静”与“境”的完美融合。这里的空气中常年弥漫着淡淡的檀香味道，混合着山间草木的清香，让人一踏入便觉心旷神怡，杂念顿消。寺庙两侧的钟楼与藏经阁如左右护法，钟楼内悬挂着一口重达数吨的古铜钟，每逢晨昏，悠扬的钟声便会响彻山谷，余音绕梁，据说听到钟声的人能洗去一身的疲惫与烦恼。而藏经阁内藏书万卷，是许多学者与修行者向往的知识圣地。【游览体验】 对于游客而言，云雾古寺不仅是一处观光点，更是一次心灵的洗礼。您可以在此点上一柱清香，为家人朋友祈福平安；也可以在殿前的银杏树下静坐片刻，听风吹树叶的沙沙声与远处传来的诵经声交织。如果是雨后的清晨来访，您将有幸目睹“云雾锁寺”的奇观——整座寺庙如同漂浮在白色的云海之上，仅露出金色的塔尖，宛如仙境。此外，寺庙旁的素斋馆也不容错过，那里提供的素食不仅取材于山间野菜，更蕴含着佛家的养生智慧，是味蕾与精神的双重享受。云雾古寺，是一处能让你慢下来，听见自己心跳的地方。", "x": 500, "y": 400},
    "S18": {"name": "藏经阁", "desc": "【景点概述】 藏经阁位于云雾古寺的最后方，是整个寺院地势最高、最为幽静的建筑。作为佛教文化的图书馆和档案馆，这里珍藏着数千卷珍贵的经书典籍、历代高僧的墨宝以及各类佛教文物。它不仅是僧人研读佛法的地方，也是向游客展示博大精深的佛教文化与中华传统书籍文化的窗口。比起前殿的香火缭绕，这里多了一份书卷气与清冷的高雅。【景观特色】 藏经阁是一座外观宏伟的三层阁楼，红柱黄墙，琉璃瓦顶，在阳光下熠熠生辉。阁前种植着两株高大的银杏树，每到深秋，满树金黄，落叶铺满台阶，与古阁相映成趣，是著名的摄影点。走进阁内，首先闻到的是一种特有的古书纸张与樟木混合的香气。一楼通常作为展览厅，陈列着部分珍贵的经书复刻本和佛像艺术品。二楼和三楼则是藏书区（部分开放），高大的楠木书柜直抵屋顶，柜中整齐排列着线装古籍。在阁楼的四周回廊，不仅可以欣赏到精美的壁画，讲述着佛陀的故事，还能享受到极佳的静谧氛围，只听得见风吹铃铎的清脆声响。【游览体验】 藏经阁的游览体验主打“静心”与“修身”。游客在这里不仅是观看者，更是参与者。阁内的一侧设有专门的“抄经堂”，提供笔墨纸砚。您可以选择坐下来，在淡淡的檀香中，静心临摹一段《心经》或《吉祥经》。在抄经的过程中，您需要屏气凝神，专注于笔尖的游走，这种极度的专注能让人瞬间忘却尘世的喧嚣与烦恼，达到一种冥想的状态。许多游客表示，在藏经阁抄写的经文是此行最珍贵的纪念品。此外，这里偶尔还会举办文化讲座或禅茶交流会，如果有幸遇到，不妨坐下来听法师讲一段禅理，喝一杯清茶，感悟生活的智慧。", "x": 550, "y": 380},
    "S19": {"name": "钟楼", "desc": "【景点概述】 钟楼位于云雾古寺中轴线的西侧，与东侧的鼓楼（虽然地图未标出，通常寺庙布局为晨钟暮鼓）遥相呼应。这是一座两层高的重檐歇山顶木结构建筑，飞檐高翘，造型古朴典雅。钟楼不仅是寺院报时的工具，在佛教文化中，更具有“警醒世人、消除烦恼”的深刻寓意。所谓“闻钟声，烦恼轻，智慧长，菩提生”，这里是游客洗涤心灵、体验禅意的必经之地。【景观特色】 钟楼内部悬挂着一口铸造于明代的巨型铜钟——“平安钟”。钟身高约3米，重达数吨，钟壁上铸满了《金刚经》的经文和各种吉祥图案，铸造工艺精湛，线条流畅。铜钟历经数百年风雨，表面已呈古铜色，泛着温润的光泽，散发着历史的厚重感。钟楼的建筑本身也是一件艺术品。梁柱之间采用了复杂的斗拱结构，未用一颗铁钉，展现了中国古代木构建筑的高超智慧。登楼的木梯狭窄而陡峭，行走其上发出“咯吱”的声响，仿佛在诉说着时光的流逝。站在钟楼二层，透过四周的窗棂，可以俯瞰整个寺院的庭院深深和远处的群山叠翠，视野极佳。【游览体验】 体验“撞钟祈福”是游览钟楼的核心项目。在僧人的指引下，游客可以亲自推动悬挂的巨大撞木，撞击铜钟。按照传统习俗，撞钟通常为三下，代表“福、禄、寿”三星高照；或者是九下，寓意“长长久久”。当撞木撞击钟身的那一刻，深沉、厚重、洪亮的钟声瞬间爆发，“在此——在此——”，声波在山谷间回荡，余音缭绕，经久不息。这种震撼不仅是听觉上的，更是身体上的共鸣，仿佛能将体内的浊气与压力一扫而空。特别是在每年的辞旧迎新之际，景区会举办“新年撞钟”活动，108响钟声响彻夜空，代表去除人生的108种烦恼，成千上万的游客聚集于此，共同聆听这来自历史深处的祝福之声。", "x": 450, "y": 380},
    "S20": {"name": "祈福台", "desc": "【景点概述】 祈福台位于云雾古寺主殿东侧的一处突出的悬崖平台上，是连接俗世愿望与神圣信仰的桥梁。它背靠巍峨的青山，面朝开阔的峡谷，视野极其开阔，象征着“纳天地之灵气”。这里是景区香火最旺盛、人气最聚集的区域之一。无论是求学业的莘莘学子，求健康的银发老人，还是求事业的职场精英，都会来到这里，怀着虔诚的心，许下最美好的祝愿。【景观特色】 祈福台的设计充满了传统文化的符号。平台中央矗立着一座巨大的青铜“天地炉”，炉身雕刻着祥云与瑞兽，终日香烟袅袅，紫气东来。最引人注目的是平台四周的汉白玉护栏，上面系满了密密麻麻的红色祈福带和祈福牌。微风吹过，万千红带随风飘舞，如同一片红色的海洋，蔚为壮观。每一条红带上都写满了汉字，或许是“金榜题名”，或许是“一生平安”，这些文字汇聚在一起，形成了强大的情感磁场。在祈福台的一角，还有一棵挂满红绸的“许愿树”。这棵古树已有数百年树龄，枝繁叶茂，苍劲有力。传说只要将写有愿望的红绸抛上树梢并成功挂住，愿望便能实现。树下往往堆满了人们抛掷红绸时留下的欢声笑语与期待的眼神。【游览体验】 来到祈福台，整个人的心境会不自觉地变得庄重而平和。您可以先在请香处请三柱清香，双手举过头顶，向着天地山川拜三拜，然后将其插入香炉，寄托对未来的期许。如果您有特定的愿望，不妨请一块木质的祈福牌，用毛笔工整地写下心愿和名字，亲手挂在护栏上。看着自己的牌子在风中摇曳，仿佛愿望已经随着风传达到了天听。这里也是眺望云雾古寺全景的绝佳角度，您可以拍下古寺在云雾缭绕中的庄严姿态。每逢春节或重阳节等传统节日，祈福台会举行盛大的祈福法会，高僧诵经，梵音绕梁，场面宏大，能让参与者感受到强烈的仪式感与心灵的震撼。", "x": 480, "y": 350},
    "S21": {"name": "素斋馆", "desc": "【景点概述】 游览完精神世界，身体的补给同样重要。素斋馆坐落于云雾古寺旁，是一座风格清雅的仿古建筑。它不仅是景区内的特色餐厅，更是推广健康饮食与慈悲文化的场所。这里的菜品严格遵循佛教素食标准，不含荤腥五辛，但大厨们运用精湛的烹饪技艺，选用景区周边深山出产的新鲜菌菇、竹笋、野菜以及豆制品，制作出“色、香、味、形”俱全的素食佳肴，彻底颠覆了人们对“吃素就是吃青菜豆腐”的刻板印象。【景观特色】 素斋馆的环境布置极具禅意。原木色的桌椅，竹制的隔断，墙上挂着水墨画，角落里摆放着兰花与盆景。餐厅内播放着舒缓的古琴曲，让人一进门便感到身心放松。这里的菜品以“仿荤”和“养生”最为出名。招牌菜如“佛门素烧鹅”，用腐皮包裹各种菌类炸制而成，外皮金黄酥脆，内馅鲜美多汁，口感竟与真烧鹅有几分神似；还有“罗汉全斋”，汇集了十八种山珍，寓意十八罗汉，色彩斑斓，营养丰富。此外，这里的“云雾素面”也是一绝，汤底用多种菌菇熬制数小时，鲜美无比，配上劲道的手工面，一碗下肚，暖胃又暖心。【游览体验】 在素斋馆用餐，讲究的是“食不语”和“惜福”。服务员会轻声细语地为您介绍菜品的典故与食材的来源。在这里吃饭，不仅仅是为了填饱肚子，更是一种修行。您可以尝试点一份“禅意套餐”，每道菜量不大，但摆盘精致如画，仿佛在品尝艺术品。细嚼慢咽中，您能品尝到食材原本的清甜，感受到大自然的馈赠。饭后，一定要喝一杯这里特制的“罗汉果茶”或“高山云雾茶”，消食解腻，回甘无穷。许多平时大鱼大肉的游客，在这里吃过一顿素斋后，都会感叹肠胃前所未有的清爽舒适。素斋馆，用最朴素的食材，烹饪出了人间至味。", "x": 600, "y": 420},

    # === E区：核心登顶区 (画布上方高海拔区) ===
    "S22": {"name": "索道上站", "desc": "【设施概述】 这条连接山脚与山顶的索道，被誉为“空中的观景长廊”。位于北部高山区，紧邻观云台。站房设计采用了抗风压的流线型钢结构，充满科技感，仿佛建在云端的空间站。【特色与体验】 这不仅仅是交通工具，更是一个移动的景点。索道全长数千米，垂直落差巨大。 坐在缆车内，随着轿厢缓缓升起，您将体验到视角的急剧变化：从平视碧波荡漾的湖水，到俯视郁郁葱葱的树冠，再到平视巍峨的崖壁。在缆车中段，您可以清晰地看到脚下的“好汉坡”蜿蜒曲折，看到登山者如蚂蚁般挪动，从而庆幸自己选择了“上帝视角”。 在云雾天气，缆车穿云破雾，仿佛在仙境中穿行；夕阳西下时，更是能拍到“缆车在落日中穿行”的绝美剪影。上下两站均设有观景平台、洗手间和小卖部，方便游客整顿装备。", "x": 480, "y": 200},
    "S23": {"name": "观云台", "desc": "【景点概述】 观云台位于景区北部的次高峰位置，紧邻索道上站与高山杜鹃园。它是一座向外悬挑的巨型木质观景平台，依悬崖走势而建，面积达数百平方米。如果说摘星峰是用来征服的，那么观云台就是用来“凝视”的。这里视野极度开阔，前方无任何遮挡，是景区内观赏自然天象、俯瞰群山沟壑的最佳“上帝视角”点位。因其地势独特，常年云雾缭绕，人立台上，如临仙境，故名“观云台”。【景观特色】 观云台最核心的景观自然是“云”。这里的云海变幻莫测，气象万千。清晨，云海如白色的绸缎铺满峡谷，只有几座最高的山峰像孤岛一样露出水面，这便是著名的“云海孤岛”奇观。随着太阳升起，温度升高，云海开始翻腾涌动，如万马奔腾，气势磅礴。除了云海，这里也是观赏“佛光”的高频发地。在雨后初晴的午后，如果运气好，阳光照射在云雾上，会在人影周围形成一圈七彩的光环，人动影动，影随光移，神奇无比。平台周围生长着许多造型奇特的古松，其中一棵“迎客松”姿态优雅，伸出的枝干仿佛在热情欢迎远道而来的客人，是游客争相合影的背景。为了方便游客，观云台还设置了多台投币式高倍望远镜，通过镜头，你可以清晰地看到对面山上攀爬的岩羊，甚至能看清山下古寺屋顶的瓦片纹理。【游览体验】 观云台是摄影发烧友的必争之地。每天清晨，这里都会架满长枪短炮，只为等待日出时那激动人心的一刻。当第一缕阳光刺破云层，将原本灰白的世界染成金红，快门声此起彼伏，记录下大自然的壮丽。对于普通游客，这里是让心灵放空的好去处。站在护栏边，闭上眼睛，感受山风拂过脸颊，听着松涛阵阵，呼吸着高山上清冽的空气，你会感到前所未有的自由与开阔。在这里大喊一声，回声在山谷间久久回荡，能将积压在心底的压力全部释放。如果你是乘坐索道上山，观云台通常是你的第一站，它用震撼的视觉冲击力，为你开启这段美好的旅程。", "x": 550, "y": 140},
    "S24": {"name": "摘星峰", "desc": "【景点概述】摘星峰，顾名思义，是整个风景区的制高点，也是挑战自我、征服自然的象征。它如同一把利剑直插云霄，傲视群山。之所以名为“摘星”，是因为当夜幕降临，登上峰顶的人会感觉苍穹低垂，繁星仿佛触手可及，似乎只要轻轻踮起脚尖，便能摘下一颗星辰入怀。这里是摄影爱好者的天堂，也是登山爱好者证明毅力的终极目标。【景观特色】摘星峰的险峻与壮美在景区内无出其右。通往峰顶的道路蜿蜒曲折，部分路段更是依悬崖而建，惊险刺激。然而，无限风光在险峰，当你克服重重困难登顶之时，眼前的景象将是对你汗水最好的回报。站在摘星峰顶的观景平台上，极目远眺，万千气象尽收眼底。向北望去，是连绵起伏的山脉脊梁，如巨龙蜿蜒；向下俯瞰，碧波湖如同一块温润的翡翠镶嵌在山谷之间，云雾古寺则像是一个精致的模型安放在半山腰。这里是观赏日出与云海的绝佳位置。每当清晨，红日冲破云层，将万道金光洒向人间，翻腾的云海瞬间被染成金红色，气势磅礴，令人震撼。而在晴朗的夜晚，这里则是另一番景象，没有城市的光污染，银河横跨天际，星光璀璨，通过附近的星空露营地，游客可以体验在“银河”下入睡的浪漫。【游览体验】登顶摘星峰的过程本身就是一种独特的体验。虽然可以选择乘坐索道直达上站后再攀登，但许多游客依然选择徒步挑战。沿途你会经过形态各异的岩石和高山植被，其中包括著名的“仙人指路石”和色彩斑斓的“高山杜鹃园”。在杜鹃花盛开的季节，通往峰顶的路仿佛铺上了红毯。在峰顶，你会感受到“会当凌绝顶，一览众山小”的豪迈。这里风很大，吹得衣襟猎猎作响，让人顿生天地辽阔、人生豪迈之感。许多情侣会选择在这里许下山盟海誓，寓意爱情如山峰般坚定；也有团队在这里进行团建，共同庆祝登顶的胜利。摘星峰不仅是一座山峰，更是一个关于勇气、坚持和梦想的地标。", "x": 500, "y": 80}, # 最高点
    "S25": {"name": "玻璃栈道", "desc": "【景点概述】 玻璃栈道是本景区近年来人气最高的“网红”打卡地，也是检验游客胆量的试金石。它像一条透明的玉带，凭空悬挂在海拔千米的绝壁之上，连接着悬崖餐厅与东部的山体。整条栈道全长约300米，宽1.5米，通体采用高强度、超白全透明钢化玻璃铺设而成。行走其上，脚下便是深不见底的峡谷深渊，抬头则是触手可及的蓝天白云，这种“踏空而行”的极致体验，既让人肾上腺素飙升，又让人欲罢不能。【景观特色】 玻璃栈道的设计巧妙地利用了原本险峻的地势。它紧贴着近乎90度垂直的崖壁修建，一边是坚硬冰冷的岩石，一边是空无一物的虚空。为了增加惊险程度，栈道中段特别设置了“碎裂特效区”——当游客踏上去时，脚下的玻璃会伴随着逼真的碎裂声出现“裂纹”影像，虽然明知是特效，但在高空之上，这种感官刺激足以让人尖叫连连。除了惊险，这里也是绝佳的观景平台。透过脚下透明的玻璃，你可以清晰地俯瞰深谷中的原始森林，郁郁葱葱的树冠如同绿色的波浪在脚下翻滚；若是运气好遇到云海天气，你便如同行走在云端之上，看着云雾从脚下的缝隙中穿过，仿佛置身天宫。这里的视野极为开阔，向东可以远眺城市的轮廓，向西则能看到索道缆车在山间缓缓穿行，是拍摄风景大片的绝佳位置。【游览体验】 游览玻璃栈道是一场心理战。在上栈道前，工作人员会要求每位游客穿上特制的绒布鞋套，这不仅是为了保护玻璃表面不被划伤，保持其高透光度，更是为了防止打滑。刚踏上去时，许多游客会不敢迈步，紧紧贴着内侧的岩壁缓慢挪动，也就是俗称的“贴墙走”。但随着逐渐适应，你会发现玻璃极为稳固，安全感油然而生。大胆的游客会选择在栈道中央做出各种高难度动作，如躺在玻璃上自拍，或者张开双臂拥抱悬崖。这里也是情侣们的热门去处，男生牵着女生的手走过栈道，往往被视为一种“共度险阻”的浪漫象征。无论你是尖叫着走完，还是淡定地漫步，走过玻璃栈道后那种“征服恐惧”的成就感，将成为此次旅行中最难忘的记忆之一。", "x": 650, "y": 250},
    "S26": {"name": "仙人指路石", "desc": "【景点概述】 仙人指路石位于景区北部，是通往摘星峰必经之路上的一处标志性自然景观。它是一块兀立于悬崖边上的巨型花岗岩，经过亿万年的风化剥蚀和重力崩塌，形成了如今这般奇特的造型。整块岩石高约十米，底部由于差异化风化而变得细窄，仿佛随时可能倾倒，实则稳如泰山。其顶部向一侧长长地伸出，末端尖锐，酷似一位身披道袍、宽袍大袖的仙人，正伸出手臂指向远方的天际，故得名“仙人指路”。【景观特色】 这块奇石的妙处在于“移步换景”。从正面看，它像一位指点迷津的长者，神态安详；从侧面看，又像一只欲飞的雄鹰，昂首挺胸。岩石表面布满了斑驳的苔藓和地衣，缝隙中顽强地生长着几株苍劲的迎客松，松针翠绿，与灰白色的岩石形成了鲜明的对比，展现了生命的坚韧。关于这块石头，当地流传着美丽的传说：相传古时有一位书生进京赶考，途经此山迷路，饥寒交迫之际，一位神仙化作樵夫，为他指明了方向。书生高中后重返此地致谢，却不见樵夫踪影，只留下了这块酷似指路姿态的巨石。如今，这块石头被赋予了吉祥的寓意，象征着在人生的迷茫时刻能得到贵人相助，指引方向。【游览体验】 此处是登山途中极佳的休憩点与打卡点。景区在岩石前方修建了观景平台，方便游客合影留念。许多游客喜欢在这里摆出各种有趣的姿势，或模仿仙人的动作，或借位拍摄仿佛站在仙人手掌之上的照片，趣味横生。对于面临人生选择或处于迷茫期的游客，这里更有着特殊的心理暗示作用。站在仙人指路石旁，顺着它手指的方向望去，是一望无际的云海和连绵的群山，视野瞬间开阔，心胸也随之打开。许多人会在这里默默许愿，希望在未来的学业、事业或生活中能找准方向，不再迷茫。这里也是观赏云海翻腾的好地方，云雾在此处聚集又消散，仙石在云雾中若隐若现，更增添了几分神秘的仙气。", "x": 420, "y": 120},
    "S27": {"name": "高山杜鹃园", "desc": "【景点概述】 位于景区北部高海拔区域的高山杜鹃园，是自然界献给这座大山最艳丽的礼服。这里紧邻索道上站与仙人指路石，海拔较高，气候凉爽湿润，独特的地理环境孕育了这片面积广阔的原生高山杜鹃林。不同于城市公园里的盆栽杜鹃，这里的杜鹃树高大古老，许多树龄都在百年以上。每当花期来临，漫山遍野的杜鹃花竞相绽放，红的似火，粉的像霞，白的如雪，将整座山峰装点得如锦似缎，蔚为壮观。【景观特色】 高山杜鹃园最大的特色在于“野趣”与“规模”。这里的杜鹃品种繁多，既有花朵硕大、色彩艳丽的“马缨杜鹃”，也有花色淡雅、香气袭人的“迷人杜鹃”。它们并非整齐排列，而是依山就势，错落有致地生长在怪石嶙峋的岩壁间、苍翠挺拔的松柏下。最为震撼的景象莫过于“花海云潮”。由于海拔较高，这里经常云雾缭绕。当白色的云海在山间涌动时，色彩斑斓的杜鹃花丛在云雾中若隐若现，仿佛天宫花园散落在人间。阳光穿透云层洒在花瓣上，晶莹剔透的露珠闪烁着光芒，每一朵花都充满了生命力。此外，园内还特意修建了木质栈道和观花亭，栈道悬空于花丛之上，让游客可以穿行于花海之中，却不会踩踏到娇嫩的花朵，真正实现了“人在花中走，宛如画中游”。【游览体验】 游览高山杜鹃园是一场色彩的盛宴。最佳的观赏季节通常在春末夏初（4月至6月），此时花开最盛。当你乘坐索道缓缓上升，从空中俯瞰，整片山坡就像被打翻的调色盘，美得令人窒息。走出索道站，扑面而来的是混合着花香与松脂香的清新空气。在这里，你可以近距离拍摄杜鹃花的特写，观察花瓣上细腻的纹路；也可以站在观景台上，拍摄以雪山或蓝天为背景的花海大片。对于植物爱好者来说，这里是一座天然的基因库，可以观察到高山植物独特的生长形态。走累了，在花丛中的木椅上小憩片刻，看着蜜蜂在花间忙碌，听着山鸟在枝头歌唱，这种融入自然的惬意感是城市生活中无法体验的奢侈。高山杜鹃园，用最热烈的色彩，展示着生命最奔放的姿态。", "x": 350, "y": 180},
    
    # === F区：特色与补给 (分布在各处) ===
    "S28": {"name": "悬崖餐厅", "desc": "【景点概述】 悬崖餐厅是景区内最具标志性的建筑奇迹之一，位于玻璃栈道的尽头，紧邻东侧绝壁。正如其名，整座餐厅有一半以上的建筑面积是悬空伸出崖壁之外的，底部仅由几根巨大的钢梁支撑，远远望去，宛如一只巨大的雄鹰停驻在峭壁之上，随时准备展翅高飞。这里不仅是填饱肚子的场所，更是挑战胆量、享受极致视觉盛宴的奢华空间，被游客评为“最惊心动魄的用餐地”。【景观特色】 餐厅的设计风格现代而简约，外墙采用了360度全落地防爆玻璃幕墙，最大程度地引入了自然光线与外部景观。无论你坐在餐厅的哪个角落，都能无死角地欣赏到窗外的万千气象。最令人称奇的是餐厅的“悬空观景用餐区”，这里的地板同样采用了高强度的透明玻璃铺设。低头看去，脚下是千米深渊和缭绕的云雾，用餐时仿佛悬浮在空中，这种“步步惊心”的体验让每一口美食都充满了刺激感。在云雾天气，餐厅被白云包裹，如同在天宫赴宴；而在晴朗的日子，这里则是观赏日落的黄金点位。夕阳西下，余晖洒满整个餐厅，玻璃幕墙反射着金色的光芒，整个空间变得辉煌而神圣。这里主打中西融合创意菜，既有本地山珍的精致烹饪，也有高品质的西式牛排与红酒，满足不同游客的味蕾需求。【游览体验】 在悬崖餐厅用餐，本身就是一次难忘的旅行体验。建议您提前预订靠窗的位置，尤其是黄昏时段。当您坐在云端，手持高脚杯，看着窗外的飞鸟在脚下盘旋，远处的群山在暮色中逐渐变成剪影，那种居高临下的掌控感与超然物外的洒脱感油然而生。对于胆小的游客，餐厅也贴心地设有内部非玻璃地面的区域，让您可以安心享受美食。这里还是著名的求婚圣地，在云端之上，在众人的见证与祝福中，许下一生的承诺，浪漫指数爆表。此外，餐厅下午时段提供的“云端下午茶”也非常受欢迎，精致的甜点配上绝美的风景，是朋友圈打卡的必选项目。悬崖餐厅，让美食与美景在云端完美邂逅。", "x": 700, "y": 300},
    "S29": {"name": "星空露营地", "desc": "【景点概述】 星空露营地位于景区北部的高海拔区域，毗邻摘星峰与观云台。这里地势平坦开阔，远离了山下的光污染与喧嚣，是景区内唯一允许过夜的户外住宿区域。营地依托高山草甸地貌而建，旨在为渴望亲近自然、向往自由生活的游客提供一个“以天为盖地为庐”的野奢体验空间。在这里，你可以逃离城市的钢筋水泥，重新找回人类祖先仰望星空的原始感动。【景观特色】 营地划分为几个不同的功能区：普通帐篷区、豪华星空泡泡屋区和房车营地区。其中最受欢迎的是“星空泡泡屋”，这些半球形的透明屋子散落在草地上，如同巨大的露珠。躺在屋内的床上，只需一按遥控器，顶部的遮阳帘便会自动打开，360度的苍穹美景瞬间映入眼帘。夜晚是这里最迷人的时刻。由于海拔高、空气稀薄且通透度极高，这里的星空显得格外璀璨。肉眼可见银河横跨天际，繁星点点，仿佛伸手可摘。营地中央设有公共篝火广场，每当夜幕降临，巨大的篝火燃起，温暖的火光照亮了四周的帐篷。营地还配备了专业的望远镜供天文爱好者观测，并有淋浴间、公共卫生间和24小时热水供应，确保了野外住宿的舒适性与便利性。【游览体验】 入住星空露营地，是一场回归自然的狂欢。傍晚时分，你可以坐在帐篷前的折叠椅上，看一场壮丽的高山日落，看着天空从湛蓝变成金黄，再变成紫红，最后归于深邃的蓝黑。入夜后，篝火晚会准时开始。来自五湖四海的陌生人围坐在一起，弹着吉他，唱着歌，分享着彼此的旅行故事，喝着啤酒吃着烧烤，所有的隔阂在这一刻都消失不见。深夜，当你钻进温暖的睡袋，耳边是风吹草动的自然白噪音，眼前是浩瀚的宇宙，这种宁静与辽阔能抚平内心所有的焦躁。如果你起得够早，拉开帐篷就能直接看到东方的第一缕阳光跃出地平线，无需辛苦爬山，这里便是看日出的最佳VIP席位。", "x": 650, "y": 720},
    "S30": {"name": "索道下站B", "desc": "【设施概述】 这条连接山脚与山顶的索道，被誉为“空中的观景长廊”。索道下站：位于南部碧波湖畔，建筑风格古色古香，与周围的水景园林融为一体。游客在此排队检票，登上全透明的观景缆车。【特色与体验】 这不仅仅是交通工具，更是一个移动的景点。索道全长数千米，垂直落差巨大。 坐在缆车内，随着轿厢缓缓升起，您将体验到视角的急剧变化：从平视碧波荡漾的湖水，到俯视郁郁葱葱的树冠，再到平视巍峨的崖壁。在缆车中段，您可以清晰地看到脚下的“好汉坡”蜿蜒曲折，看到登山者如蚂蚁般挪动，从而庆幸自己选择了“上帝视角”。 在云雾天气，缆车穿云破雾，仿佛在仙境中穿行；夕阳西下时，更是能拍到“缆车在落日中穿行”的绝美剪影。上下两站均设有观景平台、洗手间和小卖部，方便游客整顿装备。", "x": 450, "y": 600},
}

# --- 2. 定义边 ---
# 边（Edge）代表路，这里定义了哪两个景点是相连的
# 元组结构: (起点, 终点, 权重)。权重代表距离(米)
GRAPH_EDGES = [
    # === 入口区互通 ===
    # 南大门连游客中心，距离50米
    ("S01", "S02", 50), 
    # 南大门连停车场，距离100米
    ("S01", "S03", 100), 
    # 游客中心连观光车站，距离80米
    ("S02", "S05", 80),
    # 停车场连观光车站，距离120米
    ("S03", "S05", 120), 
    # 车站通往湖区S06，距离200米
    ("S05", "S06", 200), 
    # 北门S04直接通往林区S11，距离较远300米
    ("S04", "S11", 300), 

    # === 湖滨区连接 ===
    # 湖连栈道
    ("S06", "S07", 150), 
    # 湖连垂钓园
    ("S06", "S09", 200), 
    # 湖连广场
    ("S06", "S10", 180),
    # 栈道连湖心亭
    ("S07", "S08", 80),  
    # 湖心亭连广场
    ("S08", "S10", 120), 
    # 广场回游客中心，形成环路
    ("S10", "S02", 250), 
    # 垂钓园通往百鸟林，连接了B区和C区
    ("S09", "S11", 300), 

    # === 山林区连接 (开始爬坡) ===
    # 湖边到索道下站A
    ("S06", "S15", 400), 
    # 索道站旁边是好汉坡入口
    ("S15", "S14", 100), 
    # 好汉坡连一线天
    ("S14", "S12", 300), 
    # 一线天连瀑布
    ("S12", "S13", 200), 
    # 林区连瀑布
    ("S11", "S13", 400), 
    # 瀑布连情人谷
    ("S13", "S16", 250), 
    # 情人谷通北门，这是一条很长的路
    ("S16", "S04", 500), 

    # === 索道捷径 ===
    # 索道直达山顶 (距离1200米，物理距离远但不用爬山)
    ("S15", "S22", 1200), 

    # === 古刹区连接 (半山腰) ===
    # 好汉坡爬上去是古寺
    ("S14", "S17", 500), 
    # 古寺连藏经阁
    ("S17", "S18", 60),  
    # 古寺连钟楼
    ("S17", "S19", 80),
    # 藏经阁连素斋馆
    ("S18", "S21", 100), 
    # 钟楼连祈福台
    ("S19", "S20", 50),
    # 素斋馆通往玻璃栈道，连接了D区和E区
    ("S21", "S25", 300), 

    # === 登顶区连接 (高海拔) ===
    # 索道上站到观云台
    ("S22", "S23", 150), 
    # 索道上站到杜鹃园
    ("S22", "S27", 200), 
    # 观云台冲顶摘星峰
    ("S23", "S24", 300), 
    # 顶峰旁边是露营地
    ("S24", "S29", 100), 
    # 玻璃栈道通往观云台
    ("S25", "S23", 400), 
    # 奇石在峰顶附近
    ("S26", "S24", 150), 
    # 奇石连杜鹃园
    ("S26", "S27", 200), 
    
    # === 商业设施连接 ===
    # 悬崖餐厅紧邻玻璃栈道
    ("S28", "S25", 50),  
    # 索道下站B在游客中心旁
    ("S30", "S02", 50),  
    # 索道下站B连接索道上站（修正路径）
    ("S30", "S22", 500), 
]

# --- 构建图：把边转换成字典结构 ---
# 初始化一个空字典 GRAPH，用于存储图结构
GRAPH = {}
# 先遍历景点信息中的每一个代号 code
for code in PLACE:
    # 为每个景点创建一个空字典，准备存放它的邻居
    GRAPH[code] = {}

# 遍历 GRAPH_EDGES 列表中的每一条边
for edge in GRAPH_EDGES:
    u = edge[0] # 获取边的起点
    v = edge[1] # 获取边的终点
    w = edge[2] # 获取边的权重（距离）
    
    # 确保起点和终点都在我们的景点列表里，防止数据错误
    if u in GRAPH and v in GRAPH:
        # 因为是无向图（路是双向的），所以要存两次
        # 记录从 u 到 v 的距离是 w
        GRAPH[u][v] = w
        # 记录从 v 到 u 的距离也是 w
        GRAPH[v][u] = w

# --- 辅助函数：根据名字找代号 ---
# 定义函数，输入是景点名字，输出是景点代号(如 "游客中心" -> "S02")
def GetCode(name):
    # 遍历 PLACE 里的所有景点代号
    for code in PLACE:
        # 获取该代号对应的详细信息
        temp = PLACE[code]
        # 进行模糊匹配：如果输入名字完全相等，或者互相包含
        if name == temp['name'] or name in temp['name'] or temp['name'] in name: 
            # 找到了就返回代号
            return code
    # 如果找了一圈都没找到，返回 None
    return None

# --- [核心算法] 最短路径 Dijkstra ---
# 定义 Dijkstra 算法函数，计算从 start_code 到 end_code 的最短路径
# 这里没有使用 heapq 优先队列，而是使用了列表，方便初学者理解原理
def Dijkstra(start_code, end_code):
    # 1. 初始化阶段
    distances = {}      # 字典：记录从起点到每个点的目前已知最短距离
    predecessors = {}   # 字典：记录每个点的前一个点是谁（用于最后倒推路径）
    unvisited = []      # 列表：记录还有哪些点没有被"处理"过

    # 遍历图中的每一个节点
    for node in GRAPH:
        distances[node] = float('inf') # 初始时，假设起点到所有点的距离都是无穷大
        predecessors[node] = None      # 初始时，所有点都没有前驱节点
        unvisited.append(node)         # 把所有点都加入未访问列表
    
    # 起点到自己的距离设为 0
    distances[start_code] = 0

    # 2. 循环处理阶段
    # 只要"未访问列表"里还有节点，就继续循环
    while len(unvisited) > 0:
        # 步骤A：在未访问的节点中，找到距离起点最近的那个点
        current_node = None        # 当前要处理的节点
        min_dist = float('inf')    # 临时变量，用来找最小值
        
        # 遍历所有未访问的节点（这里是O(N)操作，效率较低但逻辑简单）
        for node in unvisited:
            # 如果发现这个节点的距离比当前记录的最小值还小
            if distances[node] < min_dist:
                min_dist = distances[node] # 更新最小值
                current_node = node        # 更新当前节点
        
        # 如果找不到可达节点了（剩下的都是无穷大），或者当前处理的就是终点
        if current_node is None:
            break # 退出循环
        if current_node == end_code:
            break # 找到了终点，也可以提前退出
            
        # 步骤B：从未访问列表中移除这个节点，表示它已经"结案"了
        unvisited.remove(current_node)

        # 步骤C：检查它的所有邻居（松弛操作）
        neighbors = GRAPH[current_node] # 获取当前节点的所有邻居
        for neighbor in neighbors:
            weight = neighbors[neighbor] # 获取到邻居的距离
            # 计算：如果走当前这个点到邻居，总距离是多少
            new_distance = distances[current_node] + weight
            
            # 如果算出来的新距离 比 原来记录的距离更短
            if new_distance < distances[neighbor]:
                distances[neighbor] = new_distance     # 更新邻居的最短距离
                predecessors[neighbor] = current_node  # 更新邻居的前驱（是你带我来的）

    # 3. 结果处理阶段
    # 如果终点的距离还是无穷大，说明路不通
    if distances[end_code] == float('inf'):
        return float('inf'), []

    # 4. 回溯路径（通过 predecessors 倒着往回找）
    path = []
    curr = end_code # 从终点开始
    # 只要 current 不为空（还没回溯到起点的 None）
    while curr is not None:
        path.insert(0, curr) # 把当前点插到路径列表的最前面
        curr = predecessors[curr] # 移动到前一个点
    
    # 返回：(总距离, 路径列表)
    return distances[end_code], path

# --- 3. MCP 工具定义 ---

# 使用装饰器注册这个函数为 MCP 工具
@mcp.tool()
def find_shortest_path(start_name: str, end_name: str) -> str:
    """计算景区内两点间的最短路径"""
    # 先把用户输入的中文名字转换成代号
    start = GetCode(start_name)
    end = GetCode(end_name)
    
    # 如果有一个名字没找到，返回错误提示 JSON
    if start is None or end is None:
        return json.dumps({"error": "找不到这个景点，请检查名字"}, ensure_ascii=False)

    # 调用上面的 Dijkstra 算法计算
    dist, path = Dijkstra(start, end)

    # 如果距离是无穷大，说明不可达
    if dist == float('inf'):
        return json.dumps({"found": False, "msg": "两点之间不通"}, ensure_ascii=False)
    
    # 将路径里的代号（如 S01）转换回中文名字
    path_names = []
    for n in path:
        path_names.append(PLACE[n]['name'])
    
    # 用箭头拼接成字符串，如 "南门 -> 游客中心 -> ..."
    route_str = " -> ".join(path_names)

    # 构建返回结果的字典
    result = {
        "found": True,
        "start": PLACE[start]['name'],
        "end": PLACE[end]['name'],
        "total_distance": dist,
        "path_names": path_names,
        "description": f"从【{PLACE[start]['name']}】到【{PLACE[end]['name']}】全程{dist}米。\n推荐路线：{route_str}"
    }
    # 把字典转成 JSON 字符串返回
    return json.dumps(result, ensure_ascii=False)

# 注册第二个工具：生成全景点游览路线
@mcp.tool()
def generate_all_spots_tour(start_node_name: str = "景区南大门") -> str:
    """
    生成一条全景点游览路线（简化版）。
    原理：贪心算法——走到哪里，就找下一个离得最近的没去过的地方。
    """
    # 获取起点代号，默认为南门
    start_code = GetCode(start_node_name)
    if start_code is None: 
        start_code = "S01"

    # 初始化一个列表，记录还没去过的景点
    unvisited = []
    for code in PLACE:
        unvisited.append(code)
    
    # 如果起点在列表里，先把它移除（因为已经在起点了）
    if start_code in unvisited:
        unvisited.remove(start_code)
    
    # 初始化当前位置、总路径、总距离
    current_node = start_code
    full_path_codes = [current_node] # 路径里先放入起点
    total_distance = 0
    
    # 只要"未访问列表"里还有景点，就继续走
    while len(unvisited) > 0:
        nearest_node = None      # 最近的那个点
        min_dist = float('inf')  # 最小距离
        segment_path = []        # 两点之间的小段路径

        # 遍历剩下所有没去过的地方，计算从当前位置过去要多远
        for candidate in unvisited:
            # 用 Dijkstra 算一下距离
            d, p = Dijkstra(current_node, candidate)
            # 如果这个点更近
            if d < min_dist:
                min_dist = d
                nearest_node = candidate
                segment_path = p
        
        # 如果找到了最近的下一个点
        if nearest_node is not None:
            # 累加总距离
            total_distance = total_distance + min_dist
            
            # 把这段路中间经过的点加到总路径里
            # 从索引 1 开始，因为索引 0 是当前点(也就是上一段的终点)，避免重复
            for i in range(1, len(segment_path)):
                node = segment_path[i]
                full_path_codes.append(node)
                # 如果路过的这个中间点正好也在"没去过名单"里
                if node in unvisited:
                    unvisited.remove(node) # 顺便把它标记为已去过
            
            # 更新当前位置为刚才找到的那个点
            current_node = nearest_node
        else:
            # 如果走不通了（图不连通），强制退出防止死循环
            break

    # 把代号列表转换成中文名字列表
    path_names = []
    for n in full_path_codes:
        path_names.append(PLACE[n]['name'])
    
    # 构建结果字典
    result = {
        "type": "full_tour",
        "description": f"为您生成了全景点打卡路线！全程约 {total_distance} 米。",
        "path_names": path_names
    }
    # 返回 JSON
    return json.dumps(result, ensure_ascii=False)

# 注册第三个工具：推荐主题路线
@mcp.tool()
def recommend_themed_route(theme: str) -> str:
    """
    推荐主题路线
    """
    # 根据用户输入的关键词，决定使用哪个主题 key
    selected_key = "leisure" # 默认主题：休闲
    # 如果输入包含"探险"或"挑战"
    if "探险" in theme or "挑战" in theme:
        selected_key = "adventure"
    # 如果输入包含"人文"或"寺"
    elif "人文" in theme or "寺" in theme:
        selected_key = "culture"
    # 如果输入包含"山水"或"风景"
    elif "山水" in theme or "风景" in theme:
        selected_key = "nature"
    
    # 定义不同主题必须经过的打卡点（硬编码的路线规划）
    checkpoints = []
    if selected_key == "leisure":
        # 休闲路线的点
        checkpoints = ["S01", "S02", "S05", "S06", "S08", "S15", "S22", "S23"]
    elif selected_key == "adventure":
        # 探险路线的点
        checkpoints = ["S04", "S11", "S13", "S12", "S14", "S17", "S25", "S28"]
    elif selected_key == "culture":
        # 文化路线的点
        checkpoints = ["S01", "S02", "S17", "S19", "S20", "S18", "S21"]
    elif selected_key == "nature":
        # 自然路线的点
        checkpoints = ["S03", "S11", "S13", "S27", "S23", "S24", "S29"]

    # 开始串联这些点
    full_path = []
    total_dist = 0
    
    # 比如有 A, B, C, D 四个点，我们要分段算 A->B, B->C, C->D
    for i in range(len(checkpoints) - 1):
        u = checkpoints[i]     # 当前段起点
        v = checkpoints[i+1]   # 当前段终点
        
        # 计算这两点间的最短路
        dist, path = Dijkstra(u, v)
        
        if i == 0:
            # 如果是第一段路，把路径上的点全加进去
            for node in path:
                full_path.append(node)
        else:
            # 如果是后面的路，去掉第一个点（因为上一段的终点就是这一段的起点，避免重复）
            for j in range(1, len(path)):
                full_path.append(path[j])
                
        # 累加距离
        total_dist = total_dist + dist

    # 转换成中文名字
    path_names = []
    for n in full_path:
        path_names.append(PLACE[n]['name'])
    
    # 构建结果
    result = {
        "type": "themed_route",
        "theme": selected_key,
        "description": f"推荐【{selected_key}】路线，全程 {total_dist} 米。",
        "path_names": path_names
    }
    
    return json.dumps(result, ensure_ascii=False)

# 注册第四个工具：查询景点详情
@mcp.tool()
def get_spot_temp(name: str) -> str:
    """查询景点详细介绍"""
    # 查找代号
    code = GetCode(name)
    # 如果找到了
    if code:
        temp = PLACE[code]
        # 返回格式化的介绍字符串
        return f"【{temp['name']}】\n简介: {temp['desc']}"
    # 没找到则提示
    return "未找到该景点，请输入正确的景点名称。"

# 注册第五个工具：列出所有景点
@mcp.tool()
def list_all_spots() -> str:
    """列出景区所有景点名称"""
    lines = [] # 存储每一行的列表
    # 遍历所有景点
    for k in PLACE:
        name = PLACE[k]['name']
        # 拼接代号和名字
        lines.append(f"{k}: {name}")
    
    # 用换行符连接所有行并返回
    return "\n".join(lines)

# --- 主程序入口 ---
if __name__ == "__main__":
    # 启动 MCP 服务，使用标准输入输出(stdio)作为传输方式
    # 这样可以让 Cursor, Claude Desktop 等客户端直接连接使用
    mcp.run(transport="stdio")
